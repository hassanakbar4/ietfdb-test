#!/usr/bin/env python
#
from django.contrib.auth.models import User
from django.core.exceptions import ObjectDoesNotExist

for u in User.objects.all():
    ( algo, salt, hsh ) = u.password.split( '$' )
    if algo != 'htdigest':
	continue
    # Note: not everyone needs the username one.
    # Old IESG members and some liaison users do.
    # Too much work for now to skip the ones that
    # don't need it.
    print "%s:IETF:%s" % ( u.username, hsh )
    try:
	htdigest = u.get_profile().email_htdigest
	if htdigest != '':
	    print "%s:IETF:%s" % ( u.email, htdigest )
    except ObjectDoesNotExist:
	pass
