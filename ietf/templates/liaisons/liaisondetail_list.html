{% extends "base.html" %}
{# Copyright The IETF Trust 2007, All Rights Reserved #}
{% block title %}Liaison Statements{% endblock %}

{% block pagehead %}
<link rel="stylesheet" type="text/css" href="/css/liaisons.css"></link>
<link rel="alternate" type="application/atom+xml" href="/feed/liaison/recent/" />
{% endblock %}

{% block content %}

{% block content-title %}
<h1>Liaison Statements</h1>
{% endblock %}

{% block management-links %}
{% if can_manage %}
<ul>
  {% if can_send_incoming %}<li><a href="{% url add_liaison %}?incoming">Add new incoming liaison</a></li>{% endif %}
  {% if can_send_outgoing %}<li><a href="{% url add_liaison %}">Add new outgoing liaison</a></li>{% endif %}
  {% if can_approve %}<li><a href="{% url liaison_approval_list %}">You have {{ can_approve }} pending liaison statement{{ can_approve|pluralize }} that need{{ can_approve|pluralize:"s," }} your approval</a></li>{% endif %}
</ul>
{% endif %}
{% endblock %}

<table class="ietf-table" width="100%">
<tr>
  <th width="9%" class="orderField orderField{{ submitted_date|yesno:"Active,Inactive,Reversed" }}">
    <a href="?order_by={{ submitted_date|default_if_none:"" }}submitted_date">Date</a>
  </th>
  <th width="15%" class="orderField orderField{{ from_raw_body|yesno:"Active,Inactive,Reversed" }}">
    <a href="?order_by={{ from_raw_body|default_if_none:"" }}from_raw_body">From</a>
  </th>
  <th width="15%" class="orderField orderField{{ to_body|yesno:"Active,Inactive,Reversed" }}">
    <a href="?order_by={{ to_body|default_if_none:"" }}to_body">To</a>
  </th>
  <th width="9%" class="orderField orderField{{ deadline_date|yesno:"Active,Inactive,Reversed" }}">
    <a href="?order_by={{ deadline_date|default_if_none:"" }}deadline_date">Deadline</a>
  </th>
  <th width="50%" class="orderField orderField{{ title|yesno:"Active,Inactive,Reversed" }}">
    <a href="?order_by={{ title|default_if_none:"" }}title">Title</a>
  </th>
</tr>

{% for liaison in object_list %}
<tr class="{% cycle oddrow,evenrow %}">
<td style="white-space:nowrap;">{{ liaison.submitted_date|date:"Y-m-d" }}</td>
<td>{{ liaison.from_body|escape }}</td>
<td>
{% if liaison.by_secretariat %}
  {% if liaison.submitter_email %}
    <a href="mailto:{{ liaison.submitter_email}}">{{ liaison.submitter_name|escape }}</a>
  {% else %}
    {{ liaison.submitter_name|escape }}
  {% endif %}
{% else %}
  {{ liaison.to_body|escape }}
{% endif %}
</td>
<td>
  {{ liaison.deadline_date|default:"--" }}
</td>
<td>
{% if liaison.by_secretariat %}
  {% for file in liaison.uploads_set.all %}
    <a href="https://datatracker.ietf.org/documents/LIAISON/file{{ file.file_id }}{{ file.file_extension }}">{{ file.file_title|escape }}</a><br/>
  {% endfor %}
{% else %}
  <a href="{{ liaison.detail_id }}/">{{ liaison.title|escape }}</a>
{% endif %}
</td>
</tr>
{% endfor %}

</table>
{% endblock %}

