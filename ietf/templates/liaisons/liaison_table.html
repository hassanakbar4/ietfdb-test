{% load ietf_filters %}

<table class="ietf-table" width="100%" id="LiaisonListTable">
<thead>
<tr>
  <th width="9%" class="sort{% if sort == "submitted" %} sorted{% endif %}">Date</th>
  <th width="15%" class="sort{% if sort == "from_name" %} sorted{% endif %}">From</th>
  <th width="15%" class="sort{% if sort == "to_name" %} sorted{% endif %}">To</th>
  <th width="9%" class="sort{% if sort == "deadline" %} sorted{% endif %}">Deadline</th>
  <th width="50%" class="sort{% if sort == "title" %} sorted{% endif %}">Title</th>
</tr>
</thead>

<tbody>
{% for liaison in liaisons %}
<tr class="{% cycle oddrow,evenrow %}">
  <td style="white-space:nowrap;">{{ liaison.submitted|date:"Y-m-d" }}</td>
  <td>{{ liaison.from_concat|default:liaison.from_name }}</td>
  <td>
    {% if liaison.to_concat %}
      {{ liaison.to_concat }}
    {% else %}
      {{ liaison.to_name|strip_email }}
    {% endif %}
  </td>
  <td>
    {% if liaison.awaiting_action %}<span class="awaiting">Action needed</span>{% endif %}
    {{ liaison.deadline|default:"-"|date:"Y-m-d" }}
  </td>
  <td>
    {% if not liaison.from_contact_id %}
      {% for doc in liaison.attachments.all %}
        <a href="https://datatracker.ietf.org/documents/LIAISON/{{ doc.external_url }}">{{ doc.title }}</a><br/>
      {% endfor %}
    {% else %}
      <a href="{% if liaison.approved %}{% url "liaison_detail" object_id=liaison.pk %}{% else %}{% url "liaison_approval_detail" object_id=liaison.pk %}{% endif %}">{{ liaison.title }}</a>
    {% endif %}
    <span style="display: none" class="liaisonPK">{{ liaison.pk }}</span>
  </td>
</tr>
{% endfor %}
</tbody>
</table>
