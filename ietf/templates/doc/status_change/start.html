{% extends "ietf.html" %}

{% load bootstrap3 %}

{% block title %}Begin RFC status change review{% endblock %}

{% block content %}
<h1>Begin RFC status change review</h1>

{% bootstrap_messages %}

<p><a class="btn btn-default" href="{% url "state_help" type="status-change"  %}">Help on states</a></p>

<form class="start-rfc-status-change-review" role="form" method="post">
	{% csrf_token %}

	<label class="control-label">Affected RFCs</label>
	{% for rfc,choice_slug in form.relations.items %}
		<div class="form-group">
			<div id="relation_row_{{rfc}}" class="row">
				<div class="col-md-5">
					<input class="form-control" id="new_relation_row_{{rfc}}" name="new_relation_row_{{rfc}}" type="text" value="{{rfc}}">
				</div>
				<div class="col-md-5">
					<select class="form-control" id="statchg_relation_row_{{rfc}}" name="statchg_relation_row_{{rfc}}">
						<option value="" {% if choice_slug == "" %}selected{% endif %}>(None)</option>
						{% for rel in relation_slugs %}
							<option value="{{rel.slug}}" {% if choice_slug == rel.slug %}selected{%endif%}>{{rel.name}}</option>
						{% endfor %}
					</select>
				</div>
				<div class="col-md-2">
					<button class="btn btn-danger" onclick="$('#relation_row_{{rfc}}').remove(); return false;">Delete</button>
				</div>
			</div>
		</div>
	{% endfor %}

	<div class="form-group">
		<div id="relation_row_0" class="row">
			<div class="col-md-5">
				<input class="form-control" id="new_relation_row_0" name="new_relation_row_0" type="text" placeholder="rfc...">
				<p class="help-block">Enter new affected RFC.</p>
			</div>

			<div class="col-md-5">
				<select class="form-control" id="statchg_relation_row_0" name="statchg_relation_row_0">
					<option value="" {% if choice_slug == "" %}selected{% endif %}>(None)</option>
					{% for rel in relation_slugs %}
						<option value="{{rel.slug}}" {% if choice_slug == rel.slug %}selected{%endif%}>{{rel.name}}</option>
					{% endfor %}
				</select>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-10">
			<p class="alert alert-danger">
				{% comment %}XXX FACELIFT:{% endcomment %}
				<b>Note:</b> With the redesigned UI, you currently must add new affected RFCs one by one, hitting submit each time. Only when the list of affected RFCs is complete and correct, move on to fill out the bottom part of the form (and do a final submit).
			</p>

			<div class="buttonlist">
				<button type="submit" class="btn btn-primary" name="submit_response">Submit</button>
				<a class="btn btn-default pull-right" href="{{ back_url }}">Back</a>
			</div>
			<p></p>
		</div>
	</div>

	<div class="row">
		<div class="col-md-10">
			{% bootstrap_form form %}

			{% buttons %}
				<button type="submit" class="btn btn-primary" name="submit_response">Submit</button>
				<a class="btn btn-default pull-right" href="{{ back_url }}">Back</a>
			{% endbuttons %}
		</div>
	</div>

</form>
{% endblock %}
