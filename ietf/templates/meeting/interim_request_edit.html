{% extends "base.html" %}
{# Copyright The IETF Trust 2015, All Rights Reserved #}
{% load origin %}
{% load staticfiles bootstrap3 widget_tweaks %}

{% block title %}Edit Interim Request{% endblock %}

{% block pagehead %}
  <link rel="stylesheet" href="{% static 'select2/select2.css' %}">
  <link rel="stylesheet" href="{% static 'select2-bootstrap-css/select2-bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'bootstrap-datepicker/css/bootstrap-datepicker3.min.css' %}">
{% endblock %}

{% block content %}
  {% origin %}
  <h1>Edit Interim Meeting Request</h1>

  <form id="interim-request-form" role="form" method="post" class="form-horizontal">
    {% csrf_token %}

    {% bootstrap_field form.group layout='horizontal' %}

    <input type="hidden" name="group" value="{{ form.group.value }}">

    <div class="form-group form-inline">
        <div class="col-md-offset-2">
            <div class="col-md-2">
                <label class="checkbox-inline">{% render_field form.in_person %}<strong>In Person</strong></label>
            </div>

            <div class="col-md-2">
                <label class="checkbox-inline">{% render_field form.approved %}<strong>Preapproved by AD</strong></label>
            </div>

            <!-- 
            <div class="col-md-2 radio-inline"><strong>Meeting Type:</strong></div>
            
            <label class="radio-inline">
                <input type="radio" value="single" checked="checked" name="meeting_type">Single
            </label>
            <label class="radio-inline">
                <input type="radio" value="multi-day" name="meeting_type">Multi-Day
            </label>
            <label class="radio-inline">
                <input type="radio" value="series" name="meeting_type">Series
            </label>
            -->

        </div> <!-- col-md-offset-2 -->
    </div> <!-- form-group form-inline -->
    
    <div class="form-group">
        <label for="id_form-{{ forloop.counter0 }}-city" class="col-md-2 control-label">Location</label>
        <div class="col-md-10 form-inline">
            {% render_field form.city class="form-control location" placeholder="City" %}
            {% render_field form.country class="form-control location" placeholder="Country" %}
            {% render_field form.time_zone class="form-control" %}
        </div>
    </div>

    {{ formset.management_form }}
    {% for form in formset %}
    <div class="fieldset{% if forloop.last %} template{% endif %}" >    
 
    <input id="id_session_set-{{ forloop.counter0 }}-id" name="session_set-{{ forloop.counter0 }}-id" type="hidden" value="{{ form.instance.pk|default_if_none:"" }}">

    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-date" class="col-md-2 control-label required">Date</label>
        <div class="col-md-2">{% render_field form.date class="form-control" %}</div>
    </div>
    
    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-time" class="col-md-2 control-label required">Start Time</label>
        <div class="col-md-3 form-inline">
            {% render_field form.time class="form-control time-field" placeholder="HH:MM" %}
            {% render_field form.time_utc class="form-control time-field computed" disabled="disabled" placeholder="UTC" %}
        </div>
        <label for="id_session_set-{{ forloop.counter0 }}-end_time" class="col-md-2 control-label">End Time</label>
        <div class="col-md-4 form-inline">
        {% render_field form.end_time class="form-control time-field computed" placeholder="HH:MM" disabled="disabled" %}
        {% render_field form.end_time_utc class="form-control time-field computed" disabled="disabled" placeholder="UTC" %}
        </div>
    </div>

    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-requested_duration" class="col-md-2 control-label required">Duration</label>
        <div class="col-md-2">{% render_field form.requested_duration class="form-control time-field" placeholder="HH:MM" %}</div>
    </div>

    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-remote_instructions" class="col-md-2 control-label">Remote Instructions</label>
        <div class="col-md-10">{% render_field form.remote_instructions class="form-control" placeholder="ie. Webex address" %}</div>
    </div>

    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-agenda" class="col-md-2 control-label">Agenda</label>
        <div class="col-md-10">{% render_field form.agenda class="form-control" rows="6" placeholder="paste agenda here" %}</div>
    </div>
        
    <div class="form-group">
        <label for="id_session_set-{{ forloop.counter0 }}-agenda_note" class="col-md-2 control-label">Agenda Note</label>
        <div class="col-md-10">{% render_field form.agenda_note class="form-control" placeholder="Note" %}</div>
    </div>
    <button name="id_session_set-{{ forloop.counter0 }}-delete-button" type="button" class="btn btn-default hidden btn-delete">Delete</button>
    </div>  <!-- fieldset -->
    {% endfor %}

    <div class="form-group">
    <div class="col-md-10">
    <button id="add_session" type="button" class="btn btn-default"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>Add Session</button>
    </div>
    </div>

    <div class="form-group"
    {% buttons %}
      <button type="submit" class="btn btn-primary">Submit</button>
      <a class="btn btn-default pull-right" href="{% url 'ietf.meeting.views.upcoming' %}">Back</a>
    {% endbuttons %}
    </div>
    
  </form>

{% endblock %}

{% block js %}
  <script src="{% static 'bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}"></script>
  <script src="{% static 'select2/select2.min.js' %}"></script>
  <script src="{% static 'ietf/js/meeting-interim-request.js' %}"></script>
{% endblock %}
